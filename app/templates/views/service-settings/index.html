{% extends "withnav_template.html" %}
{% from "components/banner.html" import banner_wrapper %}
{% from "components/table.html" import mapping_table, row, text_field, optional_text_field, edit_field, field, boolean_field with context %}

{% block service_page_title %}
  Settings
{% endblock %}

{% block maincolumn_content %}
  <h1 class="heading-large">General Settings</h1>
  <div class="bottom-gutter-3-2 dashboard-table body-copy-table">
    {% call mapping_table(
      caption='General',
      field_headings=['Label', 'Value', 'Action'],
      field_headings_visible=False,
      caption_visible=False
    ) %}

      {% call row() %}
        {{ text_field('Service name') }}
        {{ text_field(current_service.name) }}
        {{ edit_field(
            'Change',
            url_for('.service_name_change', service_id=current_service.id),
            permissions=['manage_service']
          )
        }}
      {% endcall %}

      {% call row() %}
        {{ text_field('Sign-in method') }}
        {{ text_field(
          'Email link or text message code'
          if 'email_auth' in current_service.permissions
          else 'Text message code'
        ) }}

        {{ edit_field(
            'Change',
            url_for('.service_set_auth_type',
            service_id=current_service.id),
            permissions=['manage_service']
          )
        }}
      {% endcall %}
    {% endcall %}
  </div>
{% endblock %}
